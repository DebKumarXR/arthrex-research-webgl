var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},i=e.parcelRequiree52e;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in o){var i=o[e];delete o[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequiree52e=i);var n=i("ilwiq"),s=(n=i("ilwiq"),i("jiuw3"));const a=new(0,(n=i("ilwiq")).Raycaster),r=new(0,n.Vector3),l=new(0,n.Vector3),h=new(0,n.Quaternion),c={X:new(0,n.Vector3)(1,0,0),Y:new(0,n.Vector3)(0,1,0),Z:new(0,n.Vector3)(0,0,1)},p={type:"change"},d={type:"mouseDown"},u={type:"mouseUp",mode:null},m={type:"objectChange"};class w extends n.Object3D{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const o=new Y;this._gizmo=o,this.add(o);const i=new z;this._plane=i,this.add(i);const s=this;function a(e,t){let n=t;Object.defineProperty(s,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,i[e]=t,o[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(p))}}),s[e]=t,i[e]=t,o[e]=t}a("camera",e),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const r=new(0,n.Vector3),l=new(0,n.Vector3),h=new(0,n.Quaternion),c=new(0,n.Quaternion),d=new(0,n.Vector3),u=new(0,n.Quaternion),m=new(0,n.Vector3),w=new(0,n.Vector3),x=new(0,n.Vector3),v=new(0,n.Vector3);a("worldPosition",r),a("worldPositionStart",l),a("worldQuaternion",h),a("worldQuaternionStart",c),a("cameraPosition",d),a("cameraQuaternion",u),a("pointStart",m),a("pointEnd",w),a("rotationAxis",x),a("rotationAngle",0),a("eye",v),this._offset=new(0,n.Vector3),this._startNorm=new(0,n.Vector3),this._endNorm=new(0,n.Vector3),this._cameraScale=new(0,n.Vector3),this._parentPosition=new(0,n.Vector3),this._parentQuaternion=new(0,n.Quaternion),this._parentQuaternionInv=new(0,n.Quaternion),this._parentScale=new(0,n.Vector3),this._worldScaleStart=new(0,n.Vector3),this._worldQuaternionInv=new(0,n.Quaternion),this._worldScale=new(0,n.Vector3),this._positionStart=new(0,n.Vector3),this._quaternionStart=new(0,n.Quaternion),this._scaleStart=new(0,n.Vector3),this._getPointer=y.bind(this),this._onPointerDown=f.bind(this),this._onPointerHover=M.bind(this),this._onPointerMove=b.bind(this),this._onPointerUp=g.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;a.setFromCamera(e,this.camera);const t=x(this._gizmo.picker[this.mode],a);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){a.setFromCamera(e,this.camera);const t=x(this._plane,a,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,d.mode=this.mode,this.dispatchEvent(d)}}pointerMove(e){const t=this.axis,o=this.mode,i=this.object;let n=this.space;if("scale"===o?n="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(n="world"),void 0===i||null===t||!1===this.dragging||-1!==e.button)return;a.setFromCamera(e,this.camera);const s=x(this._plane,a,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===o)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===n&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===n&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===n&&(i.position.applyQuaternion(h.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===n&&(i.parent&&i.position.add(r.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(r.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===o){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),l.set(e,e,e)}else r.copy(this.pointStart),l.copy(this.pointEnd),r.applyQuaternion(this._worldQuaternionInv),l.applyQuaternion(this._worldQuaternionInv),l.divide(r),-1===t.search("X")&&(l.x=1),-1===t.search("Y")&&(l.y=1),-1===t.search("Z")&&(l.z=1);i.scale.copy(this._scaleStart).multiply(l),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===o){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(r.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(r.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(c[t]),r.copy(c[t]),"local"===n&&r.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(r.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===n&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(h.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(h.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(p),this.dispatchEvent(m)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(u.mode=this.mode,this.dispatchEvent(u)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(p),this.dispatchEvent(m),this.pointStart.copy(this.pointEnd))}getRaycaster(){return a}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function y(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}}function M(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function f(e){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function b(e){this.enabled&&this.pointerMove(this._getPointer(e))}function g(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function x(e,t,o){const i=t.intersectObject(e,!0);for(let e=0;e<i.length;e++)if(i[e].object.visible||o)return i[e];return!1}const v=new(0,n.Euler),S=new(0,n.Vector3)(0,1,0),E=new(0,n.Vector3)(0,0,0),P=new(0,n.Matrix4),I=new(0,n.Quaternion),_=new(0,n.Quaternion),C=new(0,n.Vector3),A=new(0,n.Matrix4),T=new(0,n.Vector3)(1,0,0),B=new(0,n.Vector3)(0,1,0),G=new(0,n.Vector3)(0,0,1),O=new(0,n.Vector3),X=new(0,n.Vector3),Q=new(0,n.Vector3);class Y extends n.Object3D{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new(0,n.MeshBasicMaterial)({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new(0,n.LineBasicMaterial)({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=e.clone();o.opacity=.15;const i=t.clone();i.opacity=.5;const s=e.clone();s.color.setHex(16711680);const a=e.clone();a.color.setHex(65280);const r=e.clone();r.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const h=e.clone();h.color.setHex(65280),h.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const p=e.clone();p.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25;e.clone().color.setHex(16776960);const u=e.clone();u.color.setHex(7895160);const m=new(0,n.CylinderGeometry)(0,.04,.1,12);m.translate(0,.05,0);const w=new(0,n.BoxGeometry)(.08,.08,.08);w.translate(0,.04,0);const y=new(0,n.BufferGeometry);y.setAttribute("position",new(0,n.Float32BufferAttribute)([0,0,0,1,0,0],3));const M=new(0,n.CylinderGeometry)(.0075,.0075,.5,3);function f(e,t){const o=new(0,n.TorusGeometry)(e,.0075,3,64,t*Math.PI*2);return o.rotateY(Math.PI/2),o.rotateX(Math.PI/2),o}M.translate(0,.25,0);const b={X:[[new(0,n.Mesh)(m,s),[.5,0,0],[0,0,-Math.PI/2]],[new(0,n.Mesh)(m,s),[-.5,0,0],[0,0,Math.PI/2]],[new(0,n.Mesh)(M,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new(0,n.Mesh)(m,a),[0,.5,0]],[new(0,n.Mesh)(m,a),[0,-.5,0],[Math.PI,0,0]],[new(0,n.Mesh)(M,a)]],Z:[[new(0,n.Mesh)(m,r),[0,0,.5],[Math.PI/2,0,0]],[new(0,n.Mesh)(m,r),[0,0,-.5],[-Math.PI/2,0,0]],[new(0,n.Mesh)(M,r),null,[Math.PI/2,0,0]]],XYZ:[[new(0,n.Mesh)(new(0,n.OctahedronGeometry)(.1,0),p.clone()),[0,0,0]]],XY:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},g={X:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,.3,0]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new(0,n.Mesh)(new(0,n.OctahedronGeometry)(.2,0),o)]],XY:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new(0,n.Mesh)(new(0,n.OctahedronGeometry)(.01,2),i),null,null,null,"helper"]],END:[[new(0,n.Mesh)(new(0,n.OctahedronGeometry)(.01,2),i),null,null,null,"helper"]],DELTA:[[new(0,n.Line)(function(){const e=new(0,n.BufferGeometry);return e.setAttribute("position",new(0,n.Float32BufferAttribute)([0,0,0,1,1,1],3)),e}(),i),null,null,null,"helper"]],X:[[new(0,n.Line)(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new(0,n.Line)(y,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new(0,n.Line)(y,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},v={XYZE:[[new(0,n.Mesh)(f(.5,1),u),null,[0,Math.PI/2,0]]],X:[[new(0,n.Mesh)(f(.5,.5),s)]],Y:[[new(0,n.Mesh)(f(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new(0,n.Mesh)(f(.5,.5),r),null,[0,Math.PI/2,0]]],E:[[new(0,n.Mesh)(f(.75,1),d),null,[0,Math.PI/2,0]]]},S={AXIS:[[new(0,n.Line)(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new(0,n.Mesh)(new(0,n.SphereGeometry)(.25,10,8),o)]],X:[[new(0,n.Mesh)(new(0,n.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new(0,n.Mesh)(new(0,n.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new(0,n.Mesh)(new(0,n.TorusGeometry)(.5,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new(0,n.Mesh)(new(0,n.TorusGeometry)(.75,.1,2,24),o)]]},P={X:[[new(0,n.Mesh)(w,s),[.5,0,0],[0,0,-Math.PI/2]],[new(0,n.Mesh)(M,s),[0,0,0],[0,0,-Math.PI/2]],[new(0,n.Mesh)(w,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new(0,n.Mesh)(w,a),[0,.5,0]],[new(0,n.Mesh)(M,a)],[new(0,n.Mesh)(w,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new(0,n.Mesh)(w,r),[0,0,.5],[Math.PI/2,0,0]],[new(0,n.Mesh)(M,r),[0,0,0],[Math.PI/2,0,0]],[new(0,n.Mesh)(w,r),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.15,.15,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.1,.1,.1),p.clone())]]},I={X:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,.3,0]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new(0,n.Mesh)(new(0,n.CylinderGeometry)(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new(0,n.Mesh)(new(0,n.BoxGeometry)(.2,.2,.2),o),[0,0,0]]]},_={X:[[new(0,n.Line)(y,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new(0,n.Line)(y,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new(0,n.Line)(y,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function C(e){const t=new(0,n.Object3D);for(const o in e)for(let i=e[o].length;i--;){const n=e[o][i][0].clone(),s=e[o][i][1],a=e[o][i][2],r=e[o][i][3],l=e[o][i][4];n.name=o,n.tag=l,s&&n.position.set(s[0],s[1],s[2]),a&&n.rotation.set(a[0],a[1],a[2]),r&&n.scale.set(r[0],r[1],r[2]),n.updateMatrix();const h=n.geometry.clone();h.applyMatrix4(n.matrix),n.geometry=h,n.renderOrder=1/0,n.position.set(0,0,0),n.rotation.set(0,0,0),n.scale.set(1,1,1),t.add(n)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=C(b)),this.add(this.gizmo.rotate=C(v)),this.add(this.gizmo.scale=C(P)),this.add(this.picker.translate=C(g)),this.add(this.picker.rotate=C(E)),this.add(this.picker.scale=C(I)),this.add(this.helper.translate=C(x)),this.add(this.helper.rotate=C(S)),this.add(this.helper.scale=C(_)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:_;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let o=[];o=o.concat(this.picker[this.mode].children),o=o.concat(this.gizmo[this.mode].children),o=o.concat(this.helper[this.mode].children);for(let e=0;e<o.length;e++){const i=o[e];let n;if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),n=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(n*this.size/4),"helper"!==i.tag){if(i.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const e=.99,o=.2;"X"===i.name&&Math.abs(S.copy(T).applyQuaternion(t).dot(this.eye))>e&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"===i.name&&Math.abs(S.copy(B).applyQuaternion(t).dot(this.eye))>e&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"===i.name&&Math.abs(S.copy(G).applyQuaternion(t).dot(this.eye))>e&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(S.copy(G).applyQuaternion(t).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(S.copy(T).applyQuaternion(t).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(S.copy(B).applyQuaternion(t).dot(this.eye))<o&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1)}else"rotate"===this.mode&&(I.copy(t),S.copy(this.eye).applyQuaternion(h.copy(t).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(P.lookAt(this.eye,E,B)),"X"===i.name&&(h.setFromAxisAngle(T,Math.atan2(-S.y,S.z)),h.multiplyQuaternions(I,h),i.quaternion.copy(h)),"Y"===i.name&&(h.setFromAxisAngle(B,Math.atan2(S.x,S.z)),h.multiplyQuaternions(I,h),i.quaternion.copy(h)),"Z"===i.name&&(h.setFromAxisAngle(G,Math.atan2(S.y,S.x)),h.multiplyQuaternions(I,h),i.quaternion.copy(h)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._color=i.material._color||i.material.color.clone(),i.material._opacity=i.material._opacity||i.material.opacity,i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled&&this.axis&&(i.name===this.axis||this.axis.split("").some((function(e){return i.name===e})))&&(i.material.color.setHex(16776960),i.material.opacity=1)}else i.visible=!1,"AXIS"===i.name?(i.visible=!!this.axis,"X"===this.axis&&(h.setFromEuler(v.set(0,0,0)),i.quaternion.copy(t).multiply(h),Math.abs(S.copy(T).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(h.setFromEuler(v.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(h),Math.abs(S.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(h.setFromEuler(v.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(h),Math.abs(S.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(h.setFromEuler(v.set(0,Math.PI/2,0)),S.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(P.lookAt(E,S,B)),i.quaternion.multiply(h),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),r.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),r.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(r),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}super.updateMatrixWorld(e)}}class z extends n.Mesh{constructor(){super(new(0,n.PlaneGeometry)(1e5,1e5,2,2),new(0,n.MeshBasicMaterial)({visible:!1,wireframe:!0,side:n.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),O.copy(T).applyQuaternion("local"===t?this.worldQuaternion:_),X.copy(B).applyQuaternion("local"===t?this.worldQuaternion:_),Q.copy(G).applyQuaternion("local"===t?this.worldQuaternion:_),S.copy(X),this.mode){case"translate":case"scale":switch(this.axis){case"X":S.copy(this.eye).cross(O),C.copy(O).cross(S);break;case"Y":S.copy(this.eye).cross(X),C.copy(X).cross(S);break;case"Z":S.copy(this.eye).cross(Q),C.copy(Q).cross(S);break;case"XY":C.copy(Q);break;case"YZ":C.copy(O);break;case"XZ":S.copy(Q),C.copy(X);break;case"XYZ":case"E":C.set(0,0,0)}break;default:C.set(0,0,0)}0===C.length()?this.quaternion.copy(this.cameraQuaternion):(A.lookAt(r.set(0,0,0),C,S),this.quaternion.setFromRotationMatrix(A)),super.updateMatrixWorld(e)}}var V=i("5Rd1x");n=i("ilwiq");class Z extends n.BufferGeometry{constructor(e,t,o,i){super();const s=[],a=[],r=[],l=new(0,n.Vector3),h=new(0,n.Matrix4);h.makeRotationFromEuler(o),h.setPosition(t);const c=new(0,n.Matrix4);function p(t,o,i){o.applyMatrix4(e.matrixWorld),o.applyMatrix4(c),i.transformDirection(e.matrixWorld),t.push(new L(o.clone(),i.clone()))}function d(e,t){const o=[],n=.5*Math.abs(i.dot(t));for(let i=0;i<e.length;i+=3){let s,a,r,l,h=0;const c=e[i+0].position.dot(t)-n>0,p=e[i+1].position.dot(t)-n>0,d=e[i+2].position.dot(t)-n>0;switch(h=(c?1:0)+(p?1:0)+(d?1:0),h){case 0:o.push(e[i]),o.push(e[i+1]),o.push(e[i+2]);break;case 1:if(c&&(s=e[i+1],a=e[i+2],r=u(e[i],s,t,n),l=u(e[i],a,t,n)),p){s=e[i],a=e[i+2],r=u(e[i+1],s,t,n),l=u(e[i+1],a,t,n),o.push(r),o.push(a.clone()),o.push(s.clone()),o.push(a.clone()),o.push(r.clone()),o.push(l);break}d&&(s=e[i],a=e[i+1],r=u(e[i+2],s,t,n),l=u(e[i+2],a,t,n)),o.push(s.clone()),o.push(a.clone()),o.push(r),o.push(l),o.push(r.clone()),o.push(a.clone());break;case 2:c||(s=e[i].clone(),a=u(s,e[i+1],t,n),r=u(s,e[i+2],t,n),o.push(s),o.push(a),o.push(r)),p||(s=e[i+1].clone(),a=u(s,e[i+2],t,n),r=u(s,e[i],t,n),o.push(s),o.push(a),o.push(r)),d||(s=e[i+2].clone(),a=u(s,e[i],t,n),r=u(s,e[i+1],t,n),o.push(s),o.push(a),o.push(r))}}return o}function u(e,t,o,i){const s=e.position.dot(o)-i,a=s/(s-(t.position.dot(o)-i));return new L(new(0,n.Vector3)(e.position.x+a*(t.position.x-e.position.x),e.position.y+a*(t.position.y-e.position.y),e.position.z+a*(t.position.z-e.position.z)),new(0,n.Vector3)(e.normal.x+a*(t.normal.x-e.normal.x),e.normal.y+a*(t.normal.y-e.normal.y),e.normal.z+a*(t.normal.z-e.normal.z)))}c.copy(h).invert(),function(){let t=[];const o=new(0,n.Vector3),c=new(0,n.Vector3),u=e.geometry,m=u.attributes.position,w=u.attributes.normal;if(null!==u.index){const e=u.index;for(let i=0;i<e.count;i++)o.fromBufferAttribute(m,e.getX(i)),c.fromBufferAttribute(w,e.getX(i)),p(t,o,c)}else for(let e=0;e<m.count;e++)o.fromBufferAttribute(m,e),c.fromBufferAttribute(w,e),p(t,o,c);t=d(t,l.set(1,0,0)),t=d(t,l.set(-1,0,0)),t=d(t,l.set(0,1,0)),t=d(t,l.set(0,-1,0)),t=d(t,l.set(0,0,1)),t=d(t,l.set(0,0,-1));for(let e=0;e<t.length;e++){const o=t[e];r.push(.5+o.position.x/i.x,.5+o.position.y/i.y),o.position.applyMatrix4(h),s.push(o.position.x,o.position.y,o.position.z),a.push(o.normal.x,o.normal.y,o.normal.z)}}(),this.setAttribute("position",new(0,n.Float32BufferAttribute)(s,3)),this.setAttribute("normal",new(0,n.Float32BufferAttribute)(a,3)),this.setAttribute("uv",new(0,n.Float32BufferAttribute)(r,2))}}class L{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}var F=i("7lx9d"),W=i("kp7Te"),N=i("8Zfx2"),D=i("4CEV9");window.logTriangleDefinitions=D.logTriangleDefinitions;const R={brush1Shape:"box",brush1Complexity:1,brush1Color:"#d1d1d1ff",brush2Shape:"sphere",brush2Complexity:1,brush2Color:"#E91E63",operation:D.SUBTRACTION,wireframe:!1,displayBrushes:!0,displayControls:!0,shadows:!1,vertexColors:!1,flatShading:!1,gridTexture:!1,useGroups:!0,enableDebugTelemetry:!0,displayIntersectionEdges:!1,displayTriangleIntersections:!1,displayBrush1BVH:!1,displayBrush2BVH:!1,minScale:.01,maxScale:1,rotate:!0,positions:"stand",visMode:"normal",reset:function(){H.position.set(-10.5,0,-2.83),H.updateProjectionMatrix(),K.reset(),J.rotation.set(0,0,0),J.position.set(0,0,0),ee.rotation.set(0,0,0),ee.position.set(0,0,0),Object.keys(ye).forEach((e=>ye[e].updateDisplay())),me=!0,_e.forEach((function(e){Me.remove(e)})),_e.length=0}};let j,H,k,q,U,K,$,J,ee,te,oe,ie,ne,se,ae,re,le,he,ce,pe,de,ue,me=!0;const we=new Map,ye={startZCtrl:null,startYCtrl:null,startXCtrl:null};let Me,fe,be;const ge={intersects:!1,point:new n.Vector3,normal:new n.Vector3},xe=new n.Vector2,ve=[],Se=new n.TextureLoader,Ee=Se.load("/textures/decal/decal-diffuse.png");Ee.colorSpace=n.SRGBColorSpace;const Pe=Se.load("/textures/decal/decal-normal.jpg"),Ie=new n.MeshPhongMaterial({specular:4473924,map:Ee,normalMap:Pe,normalScale:new n.Vector2(1,1),shininess:30,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4,wireframe:!1}),_e=[];let Ce;const Ae=new n.Vector3,Te=new n.Euler,Be=new n.Vector3(10,10,10);function Ge(e){"normal"===e?(R.operation=D.ADDITION,R.useGroups=!1,R.displayBrushes=!1,J.visible=R.displayBrushes,ee.visible=R.displayBrushes,Ye(!1)):"transparent"===e?(R.operation=D.SUBTRACTION,R.useGroups=!0,R.displayBrushes=!0,J.visible=R.displayBrushes,ee.visible=R.displayBrushes,Ye(!1)):"intersection"===e?(R.operation=D.SUBTRACTION,R.useGroups=!0,R.displayBrushes=!1,J.visible=R.displayBrushes,ee.visible=R.displayBrushes,Ye(!1)):"impingement"===e&&(R.operation=D.SUBTRACTION,R.useGroups=!1,R.displayBrushes=!0,J.visible=R.displayBrushes,ee.visible=R.displayBrushes,Ye(!0)),me=!0}function Oe(e,t,o,i){switch(e.geometry.dispose(),t){case"sphere":e.geometry=new(0,n.SphereGeometry)(1,Math.round(n.MathUtils.lerp(5,32,o)),Math.round(n.MathUtils.lerp(5,16,o)));break;case"box":const t=Math.round(n.MathUtils.lerp(1,10,o));e.geometry=new(0,n.BoxGeometry)(1,1,1,t,t,t);break;case"cylinder":e.geometry=new(0,n.CylinderGeometry)(.5,.5,1,Math.round(n.MathUtils.lerp(5,32,o)));break;case"torus":e.geometry=new(0,n.TorusGeometry)(.6,.2,Math.round(n.MathUtils.lerp(4,16,o)),Math.round(n.MathUtils.lerp(6,30,o)));break;case"torus knot":e.geometry=new(0,n.TorusKnotGeometry)(.6,.2,Math.round(n.MathUtils.lerp(16,64,o)),Math.round(n.MathUtils.lerp(4,16,o)));break;case"mesh":e.geometry=i.clone()}e.geometry=e.geometry.toNonIndexed();const s=e.geometry.attributes.position,a=new Float32Array(3*s.count);for(let e=0,t=a.length;e<t;e+=9)a[e+0]=1,a[e+1]=0,a[e+2]=0,a[e+3]=0,a[e+4]=1,a[e+5]=0,a[e+6]=0,a[e+7]=0,a[e+8]=1;e.geometry.setAttribute("color",new(0,n.BufferAttribute)(a,3)),e.prepareGeometry(),me=!0}function Xe(){requestAnimationFrame(Xe);const e=R.enableDebugTelemetry;if(me){me=!1,J.updateMatrixWorld(),ee.updateMatrixWorld();const t=window.performance.now();he.debug.enabled=e,he.useGroups=R.useGroups,he.evaluate(J,ee,R.operation,te),R.useGroups?te.material=te.material.map((e=>we.get(e))):te.material=ne;const o=window.performance.now()-t;U.innerText=`${o.toFixed(3)}ms`,e&&(se.setEdges(he.debug.intersectionEdges),ae.setTriangles([...he.debug.triangleIntersectsA.getTrianglesAsArray(),...he.debug.triangleIntersectsA.getIntersectionsAsArray()]))}oe.visible=R.wireframe,J.visible=R.displayBrushes,ee.visible=R.displayBrushes,ie.castShadow=R.shadows,$.enabled=R.displayControls,$.visible=R.displayControls,se.visible=e&&R.displayIntersectionEdges,ae.visible=e&&R.displayTriangleIntersections,re.visible=R.displayBrush1BVH,le.visible=R.displayBrush2BVH}function Qe(e,t){if(void 0!==Me)if(xe.x=e/window.innerWidth*2-1,xe.y=-t/window.innerHeight*2+1,fe.setFromCamera(xe,H),fe.intersectObject(Me,!1,ve),ve.length>0){const e=ve[0].point;Ce.position.copy(e),ge.point.copy(e);const t=(new n.Matrix3).getNormalMatrix(Me.matrixWorld),o=ve[0].face.normal.clone();o.applyNormalMatrix(t),o.multiplyScalar(10),o.add(ve[0].point),ge.normal.copy(ve[0].face.normal),Ce.lookAt(o);const i=be.geometry.attributes.position;i.setXYZ(0,e.x,e.y,e.z),i.setXYZ(1,o.x,o.y,o.z),i.needsUpdate=!0,ge.intersects=!0,ve.length=0}else ge.intersects=!1}function Ye(e){void 0!==Me&&(e?(Me.scale.set(.5,.5,.5),Me.position.set(0,0,0)):(Me.scale.set(1e-4,1e-4,1e-4),Me.position.set(1e3,1e3,1e3)))}function ze(){H.aspect=window.innerWidth/window.innerHeight,H.updateProjectionMatrix(),j.setSize(window.innerWidth,window.innerHeight)}function Ve(){j.render(k,H)}!async function(){U=document.getElementById("output"),j=new(0,n.WebGLRenderer)({antialias:!0}),j.setPixelRatio(window.devicePixelRatio),j.setSize(window.innerWidth,window.innerHeight),j.setAnimationLoop(Ve),j.setClearColor(1118481,1),j.shadowMap.enabled=!0,j.shadowMap.type=n.PCFSoftShadowMap,document.body.appendChild(j.domElement),k=new(0,n.Scene),ie=new(0,n.DirectionalLight)(16777215,2.5),ie.position.set(-20,2,3),k.add(ie,ie.target),k.add(new(0,n.AmbientLight)(11583173,.35));const e=ie.shadow.camera;let t;ie.castShadow=!1,ie.shadow.mapSize.setScalar(2048),ie.shadow.bias=1e-5,ie.shadow.normalBias=.01,e.left=e.bottom=-2.5,e.right=e.top=2.5,e.updateProjectionMatrix(),H=new(0,n.PerspectiveCamera)(75,window.innerWidth/window.innerHeight,.1,50),H.position.set(-10.5,0,-2.83),H.far=100,H.updateProjectionMatrix(),K=new(0,V.OrbitControls)(H,j.domElement),$=new w(H,j.domElement),$.setSize(.75),$.addEventListener("dragging-changed",(e=>{K.enabled=!e.value})),$.addEventListener("objectChange",(()=>{me=!0})),k.add($),he=new(0,D.Evaluator),he.attributes=["position","normal"],J=new(0,D.Brush)(new(0,n.BoxGeometry),new(0,D.GridMaterial)),ee=new(0,D.Brush)(new(0,n.BoxGeometry),new(0,D.GridMaterial)),ee.scale.setScalar(.5),J.scale.setScalar(.5),Oe(J,R.brush1Shape,R.brush1Complexity),Oe(ee,R.brush2Shape,R.brush2Complexity),J.material.opacity=.15,J.material.transparent=!0,J.material.depthWrite=!1,J.material.polygonOffset=!0,J.material.polygonOffsetFactor=.2,J.material.polygonOffsetUnits=.2,J.material.side=n.DoubleSide,J.material.premultipliedAlpha=!0,J.material.roughness=.25,J.material.color.set(11908533),ee.material.opacity=.15,ee.material.transparent=!0,ee.material.depthWrite=!1,ee.material.polygonOffset=!0,ee.material.polygonOffsetFactor=.2,ee.material.polygonOffsetUnits=.2,ee.material.side=n.DoubleSide,ee.material.premultipliedAlpha=!0,ee.material.roughness=.25,ee.material.color.set(15277667),J.receiveShadow=!0,ee.receiveShadow=!0,$.attach(ee),k.add(J,ee),t=J.material.clone(),t.side=n.FrontSide,t.opacity=1,t.transparent=!1,t.depthWrite=!0,we.set(J.material,t),t=ee.material.clone(),t.side=n.FrontSide,t.opacity=1,t.transparent=!1,t.depthWrite=!0,we.set(ee.material,t),we.forEach(((e,t)=>{e.enableGrid=R.gridTexture,t.enableGrid=R.gridTexture})),te=new(0,n.Mesh)(new(0,n.BufferGeometry),new(0,n.MeshStandardMaterial)({flatShading:!1,polygonOffset:!0,polygonOffsetUnits:.1,polygonOffsetFactor:.1})),te.castShadow=!0,te.receiveShadow=!0,ne=te.material,k.add(te),oe=new(0,n.Mesh)(te.geometry,new(0,n.MeshBasicMaterial)({wireframe:!0,color:0,opacity:.15,transparent:!0})),k.add(oe),se=new(0,D.EdgesHelper),se.color.set(15277667),k.add(se),ae=new(0,D.TriangleSetHelper),ae.color.set(48340),k.add(ae),re=new(0,N.MeshBVHVisualizer)(J,20),le=new(0,N.MeshBVHVisualizer)(ee,20),k.add(re,le),re.update(),le.update(),ce=await(new(0,F.GLTFLoader)).setMeshoptDecoder(W.MeshoptDecoder).loadAsync("/mesh/hip.glb"),de=ce.scene.children[0].geometry,de.computeVertexNormals(),pe=await(new(0,F.GLTFLoader)).setMeshoptDecoder(W.MeshoptDecoder).loadAsync("/mesh/femur.glb"),ue=pe.scene.children[0].geometry,ue.computeVertexNormals(),q=new(0,s.GUI),q.add(R,"operation",{ADDITION:D.ADDITION,SUBTRACTION:D.SUBTRACTION,REVERSE_SUBTRACTION:D.REVERSE_SUBTRACTION,INTERSECTION:D.INTERSECTION,DIFFERENCE:D.DIFFERENCE,HOLLOW_INTERSECTION:D.HOLLOW_INTERSECTION,HOLLOW_SUBTRACTION:D.HOLLOW_SUBTRACTION}).onChange((e=>{me=!0,e===D.HOLLOW_INTERSECTION||e===D.HOLLOW_SUBTRACTION?we.forEach((e=>e.side=n.DoubleSide)):we.forEach((e=>e.side=n.FrontSide))})),q.add(R,"vertexColors").onChange((e=>{J.material.vertexColors=e,J.material.needsUpdate=!0,ee.material.vertexColors=e,ee.material.needsUpdate=!0,we.forEach((t=>{t.vertexColors=e,t.needsUpdate=!0})),he.attributes=e?["color","position","normal"]:["position","normal"],me=!0})),$.setMode("rotate"),window.addEventListener("resize",(function(){H.aspect=window.innerWidth/window.innerHeight,H.updateProjectionMatrix(),j.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":case"KeyR":break;case"KeyE":$.setMode("rotate")}})),q.add(R,"positions",["stand","sit","120squat","90split"]).name("Positions").onChange((e=>{!function(e){"stand"===e?ee.rotation.set(0,0,0):"sit"===e?ee.rotation.set(0,90,0):"120squat"===e?ee.rotation.set(0,120,0):"90split"===e&&ee.rotation.set(0,Math.PI/2,0);Object.keys(ye).forEach((e=>ye[e].updateDisplay())),me=!0}(e)}));const o=q.addFolder("rotation");ye.startXCtrl=o.add(ee.rotation,"x",0,2*Math.PI).name("X").onChange((()=>{me=!0})),ye.startYCtrl=o.add(ee.rotation,"y",0,2*Math.PI).name("Y").onChange((()=>{me=!0})),ye.startZCtrl=o.add(ee.rotation,"z",0,2*Math.PI).name("Z").onChange((()=>{me=!0})),o.open(),q.add(R,"minScale",1,30),q.add(R,"maxScale",1,30),q.add(R,"rotate"),q.add(R,"reset"),q.add(R,"visMode",["normal","transparent","intersection","impingement"]).name("Mode").onChange((e=>{Ge(e)})),Ge("normal"),function(){const e=new n.BufferGeometry;e.setFromPoints([new n.Vector3,new n.Vector3]),be=new n.Line(e,new n.LineBasicMaterial),k.add(be),async function(){(new(0,F.GLTFLoader)).load("/mesh/hip.glb",(function(e){Me=e.scene.children[0],Me.material=new n.MeshPhongMaterial({specular:1118481,vertexColors:!0,color:11184810,shininess:25}),k.add(Me),Me.scale.multiplyScalar(10),Ye(!1);const t=Me.geometry.attributes.position,o=new Float32Array(3*t.count);for(let e=0;e<t.count;e++)o[3*e+0]=1,o[3*e+1]=1,o[3*e+2]=1;Me.geometry.setAttribute("color",new n.BufferAttribute(o,3)),Me.geometry.computeVertexNormals()}))}(),fe=new n.Raycaster,Ce=new n.Mesh(new n.BoxGeometry(1,1,10),new n.MeshNormalMaterial),Ce.visible=!1,k.add(Ce),window.addEventListener("resize",ze);let t=!1;K.addEventListener("change",(function(){t=!0})),window.addEventListener("pointerdown",(function(){t=!1})),window.addEventListener("pointerup",(function(e){!1===t&&(Qe(e.clientX,e.clientY),ge.intersects&&function(e){if(void 0===Me)return;(function(e){if(void 0===Me)return;if(fe.setFromCamera(e,H),fe.intersectObject(Me,!1,ve),ve.length>0){const e=ve[0].point;Ce.position.copy(e),ge.point.copy(e);const t=(new n.Matrix3).getNormalMatrix(Me.matrixWorld),o=ve[0].face.normal.clone();o.applyNormalMatrix(t),o.multiplyScalar(10),o.add(ve[0].point),ge.normal.copy(ve[0].face.normal),Ce.lookAt(o);const i=be.geometry.attributes.position;i.setXYZ(0,e.x,e.y,e.z),i.setXYZ(1,o.x,o.y,o.z),i.needsUpdate=!0,ge.intersects=!0}else ge.intersects=!1})(e),function(){Ae.copy(ge.point),Te.copy(Ce.rotation),R.rotate&&(Te.z=2*Math.random()*Math.PI);const e=R.minScale+Math.random()*(R.maxScale-R.minScale);Be.set(e,e,e);const t=Ie.clone();t.color.setHex(16711680);const o=new n.Matrix4,i=new n.Mesh(new Z(Me,Ae,o,Be),t);i.renderOrder=_e.length,_e.push(i),Me.attach(i)}()}(ge.point))})),window.addEventListener("pointermove",(function(e){e.isPrimary&&Qe(e.clientX,e.clientY)}))}(),void 0!==de&&(Oe(J,"mesh",R.brush1Complexity,de),re.update());void 0!==ue&&(Oe(ee,"mesh",R.brush2Complexity,ue),le.update());Xe()}();
//# sourceMappingURL=simple.fddf0cf1.js.map
